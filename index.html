<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Uçuş Bilgileri</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <h1>Uçuş Bilgileri</h1>
        <form id="flightForm">
            <div class="form-group">
                <label for="icao24">Uçak ICAO24:</label>
                <input type="text" class="form-control" id="icao24" name="icao24" required>
            </div>
            <div class="form-group">
                <label for="begin">Başlangıç Zamanı (Unix zaman damgası):</label>
                <input type="number" class="form-control" id="begin" name="begin" required>
            </div>
            <div class="form-group">
                <label for="end">Bitiş Zamanı (Unix zaman damgası):</label>
                <input type="number" class="form-control" id="end" name="end" required>
            </div>
            <button type="submit" class="btn btn-primary">Uçuş Bilgilerini Getir</button>
        </form>

        <h2 class="mt-5">Uçuşlar</h2>
        <ul id="flightsList" class="list-group"></ul>
    </div>

    <script>
        $(document).ready(function() {
            $('#flightForm').on('submit', function(e) {
                e.preventDefault(); // Formun gönderimini engelle

                var icao24 = $('#icao24').val();
                var begin = $('#begin').val();
                var end = $('#end').val();

                // AJAX isteği gönder
                $.ajax({
                    url: '/flights',
                    method: 'GET',
                    data: {
                        icao24: icao24,
                        begin: begin,
                        end: end
                    },
                    success: function(data) {
                        $('#flightsList').empty(); // Önceki sonuçları temizle
                        if (data.length > 0) {
                            data.forEach(function(flight) {
                                $('#flightsList').append(
                                    `<li class="list-group-item">
                                        Uçak ICAO24: ${flight[0]} - Başlangıç: ${flight[1]} - Bitiş: ${flight[2]}
                                    </li>`
                                );
                            });
                        } else {
                            $('#flightsList').append('<li class="list-group-item">Uçuş bulunamadı.</li>');
                        }
                    },
                    error: function() {
                        $('#flightsList').append('<li class="list-group-item">Hata oluştu. Lütfen tekrar deneyin.</li>');
                    }
                });
            });
        });
    </script>
</body>
</html>
